
tinymce.PluginManager.add('evimages', function(editor, url) {
	
	var uploadFile = function(){
		alert('a');
	}

	var evUploadBox = function() {
		editor.windowManager.open({
			title: 'Upload an image',
			body: [
                {type: 'file', name: 'file', label: 'Image File',subtype: 'file', onchange: uploadFile},
            ],
			width : 350,
			height: 135,
			buttons: [{
				text: 'Upload',
				classes:'widget btn primary first abs-layout-item',
				disabled : true,
				onclick: 'close'
			},
			{
				text: 'Close',
				onclick: 'close'
			}]
		});
	}
	
	// Add a button that opens a window
	editor.addButton('evimages', {
		tooltip: 'Upload an image',
		icon : 'image',
		text: 'Upload',
		onclick: evUploadBox
	});

	// Adds a menu item to the tools menu
	editor.addMenuItem('evimages', {
		text: 'Upload image',
		icon : 'image',
		context: 'insert',
		onclick: evUploadBox
	});
});